<!doctype html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />  
		<!-- HTTP 1.1 -->  
		<meta http-equiv="pragma" content="no-cache">  
		<!-- HTTP 1.0 -->  
		<meta http-equiv="cache-control" content="no-cache">  
		<!-- Prevent caching at the proxy server -->  
		<meta http-equiv="expires" content="0">  
		<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9" /> 
		<title>yunyin_request.js 测试页面</title>
		<script type="text/javascript" src="./yunyin_request.js"></script>
	</head>
	<body>
		<textarea id="in" rows="10" cols="50">{"number":"2012202045","sch_id":"1","password":"123456"}</textarea>
		<br>
		<select id="sl">
		  <option value="get">GET</option>
		  <option value="post">POST</option>
		  <option value="put">PUT</option>
		  <option value="delete">DELETE</option>
		</select>
		<p>resource: <input id="rs" type="text" value="auth/" /></p>
		<button onclick="request()" type="button">Request</button><br>
		<textarea id="out" rows="10" cols="50"></textarea>
		<h4 id="info" style="color:red">调试信息</h4>


		<script type="text/javascript">
			function request() {
				var method = document.getElementById('sl').value;
				var data = document.getElementById('in').value;
				var resource = "../index.php/" + document.getElementById('rs').value

				var info_text = document.getElementById('info');

				if(data!=""){
					try {
						JSON.parse(data);
					}catch(e){
						info_text.textContent = "请确保传入数据json格式正确";
						return;
					}
				}

				info_text.textContent = "调试信息";

				var rp_textarea = document.getElementById('out');
				rp_textarea.value = "";

				Yunyin_Request.ajax({
					method: method,
					url: resource,
					data: data,				
					success: function(x) {
						rp_textarea.value = x;
					},
					
					error: function(x) {
						rp_textarea.value = x;
					},

				});

			}

		</script>
	</body>
</html>